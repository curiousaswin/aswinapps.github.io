<!DOCTYPE HTML>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.js" integrity="sha512-sn/GHTj+FCxK5wam7k9w4gPPm6zss4Zwl/X9wgrvGMFbnedR8lTUSLdsolDRBRzsX6N+YgG6OWyvn9qaFVXH9w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://kit.fontawesome.com/3e2a93553e.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/RecordRTC/5.6.2/RecordRTC.min.js" integrity="sha512-IMLquIKoKQeQ+kYuec3BvLYjy3yF2nH/ojHPkXQnQTeGKRliZcVed19I6E0t+WBt+9uPuEba0t2iyZAVP8mdlw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/RecordRTC/5.6.2/RecordRTC.js" integrity="sha512-ct9A+Fsq37O/MmhMrl0o5R8WoS0V1YS2fW69RGnpa4lIQvUhMOA3xbGQ8oy4UK6CeWb8JPu4QippagGlVu1c+A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia">
<!-- jQuery library -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https:////code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>

        <title>Aswin's Ultra Director</title>
        <style>
            body{
                background-image: url('https://wallpaperaccess.com/full/334517.jpg');
            }
            label {
  background-color: BLUE;
  color: white;
  padding: 0.5rem;
  font-family: sans-serif;
  border-radius: 0.3rem;
  cursor: pointer;
  margin-top: 1rem;
}
img{
    color:white;
   
}
#preview{
    width:450px;
    height:250px;
    text-align: center;
}
#btntoload{
   border-radius: 50%;
    background-color:#00008b;
    color:white;
    cursor:pointer;
 
}
h1{
    color:white;
    text-align:center;
}
span{
    color:white;
    text-align:center;
    font-size:24px;
}
        </style>
    </head>
<body onload="loading()">
    <DIV ID="VIDEO">
        
    </DIV>
    
    <h1>Aswin's Ultra Director<span class="badge badge-info">Pre-Release Version</span></h1>
  
    <h5  style="background-color:#D3D3D3;">Timeline:<span style="text-align:right;position:relative;"><button type="button" class="btn" style="background-color:#D3D3D3;"  data-toggle="modal" data-target="#change"><i class="fa-solid fa-pen-to-square"></i>Edit</button></span></h5>
    <div id="imagelanding" style="background-color:#D3D3D3;"></div><button type="btn" class="btn btn-primary" data-toggle="modal" data-target="#duration" alt="duration">                 <i class="fa-regular fa-clock"></i><br>Duration Per Image</button>
    <button type="btn" class="btn btn-primary" data-toggle="modal" data-target="#theme" alt="theme"><i class="fa-brands fa-ethereum"></i><br>Theme</button>
    <button type="btn" class="btn btn-primary" data-toggle="modal" data-target="#transition"><i class="fa-solid fa-rotate"></i><br>Transitions</button>
    <button type="btn" class="btn btn-primary" data-toggle="modal" data-target="#color"><i class="fa-solid fa-fill-drip"></i><br>Background</button>
        <button type="btn" class="btn btn-primary" data-toggle="modal" data-target="#title"><i class="fa-solid fa-address-card"></i><br>Title Card</button>

    <input id="file-input" type="file" accept="image/*" hidden multiple>
    <label style="text-align:center;" for="file-input"><i  class="fa-solid fa-upload"></i><br>Upload Files to Create a Video</label><br><br>

    <div class="custom-file mb-3">
      <input type="file" class="custom-file-input"   id="music" accept=".mp3" onchange="changeHandler()">
      <label class="custom-file-label" for="music">Choose Background Music</label>
    </div>
<div id="preview" style="background-color:black;"><DIV ID="THEMEMAKER" style="  display: inline-block;
  position:relative;" width="450px" height="250px" ><img width="450px" style="  width: 100%;
  max-width: 100%;
  border: 1px solid blue;" height="250px" id="videoplayer" alt="Your Video">  </DIV>

</div>
 <div style="background-color: #5A5A5A;position:relative;width:450px;" width="450px"><button onclick="startpreview()" id="btntoload"><i style="font-size:24px;" class="fa-solid fa-play 10x"></i></button><button class="btn btn-primary" onclick="makeFullScreen()">Full Screen</button> <span id="sec"></span></div>
 
<div class="modal" id="change">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Change Image Order</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
    Replace the <input type="number" id="imgtoreplace" min="1"> image with the <input type="number" id="imgtouses" min="1">image. 
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
          <button type="btn" class="btn btn-success" data-dismiss="modal" onclick="switched()">Switch</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>
<div class="modal" id="duration">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Duration Per Image</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
       <div class="input-group mb-3">
      
      <input type="number" min="1" max="15" id="timers" class="form-control" value="1">
      <div class="input-group-prepend">
        <span class="input-group-text">seconds</span>
      </div>
    </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>
<div class="modal" id="transition">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Select Transition that works with all images</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
      <Select id="transitions">
          <option value="explode">&#128163; Explode Transition</option>
          <option value="fold"> &#128193;Fold Transition</option>
           <option value="blind">ÔÅ∞Blind Transition</option>
             <option value="bounce">&#128372; Bounce Transition</option>
             <option value="clip">	&#128206; Clip Transition</option>
             <option value="drop">&#128167;Drop Transition</option>
             <option value="puff">	&#128168; Puff Transition</option>
               <option value="pulsate">&#128147; ;Pulsate Transition</option>
                  <option value="scale">&#9878;Scale Transition</option>
                    <option value="shake">&#129309;Shake Transition</option>
            <option value="slide">&#127898;Slide Transition</option>
      </Select>
    </div>
      

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>
<div class="modal" id="theme">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Theme</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
       <div class="input-group mb-3">
      
     
      <button class="btn btn-primary" type="btn" onclick="blackandwhitetheme()"><i class="fa-brands fa-black-tie"></i><br>Black and White</button>
     <button class="btn btn-primary" onclick="birthdaytheme()">Birthday</button>
     <button class="btn btn-primary" onclick="unicorntheme()">Unicorn</button>
     <button class="btn btn-primary" onclick="firetheme()">Fire</button>
    </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>
<div class="modal" id="color">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Background</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
       <input type="color" value="#000000" id="colorofback">
       <br><button type="button" class="btn btn-success" onclick="changebackcolor()" data-dismiss="modal">OK</button>
       <h5>Gradients:</h5>
       <input type="color" value="#000000" id="gradcolorone">
       <input type="color" value="#000000" id="gradcolortwo">
       <button type="button" class="btn btn-success" data-dismiss="modal" onclick="changegradient()">OK</button>
    </div>
      

      <!-- Modal footer -->
      <div class="modal-footer">
          
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
      </div>
</div>
    </div>
  </div>
<div class="modal" id="title">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Add Title Card</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
          <h5>Text</h5>
          <input type="text" class="form-control" id="textitle">
      <h5>Font Family:</h5>
      <select id="fontfamily">
          <option value="arial">Arial</option>
          <option value="cursive">Cursive</option>
          <option value="comic sans ms">Comic Sans Ms</option>
          <option value="Impact">Impact</option>
      
      </select>
          <h5>Font Size:</h5>
          <select id="fontsize">
              <option value="12pt">12</option>
              <option value="24pt">24</option>
              <option value="36pt">36</option>
              <option value="48pt">48</option>
              <option value="56pt">56</option>
          </select>
          <h5>Font Color:</h5>
          <input type="color" id="fontcolor" value="#000000">
          <h5>Background Color:</h5>
          <input type="color" id="backcolor" value="#FFFFFF">
    </div>
      

      <!-- Modal footer -->
      <div class="modal-footer">
          <button type="btn" class="btn btn-success" data-dismess="modal" onclick="createtitle()">Create Title</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
      </div>
</div>
    </div>
  </div>
<audio id="musicexecute"></audio>

<script>
Element.prototype.prependChild = function(newElement) {
	return this.insertBefore(newElement, this.firstChild);
};

function loading(){
    
}
    function previewImages() {

  var preview = document.querySelector('#imagelanding');
  
  if (this.files) {
    [].forEach.call(this.files, readAndPreview);
  }

  function readAndPreview(file) {

    // Make sure `file.name` matches our extensions criteria
    if (!/\.(jpe?g|png|gif)$/i.test(file.name)) {
      return alert(file.name + " is not an image. We only accept jpg, png and gif. Please use the supported file types.");
    } // else...
    
    var reader = new FileReader();
    
    reader.addEventListener("load", function() {
      var image = new Image();
      image.height = 100;
      image.title  = file.name;
      image.src    = this.result;
      image.id = "imgtouse";
      preview.appendChild(image);
    });
    
    reader.readAsDataURL(file);
    
  }     

}

document.querySelector('#file-input').addEventListener("change", previewImages);

   var changers;
 function startpreview(){
     var interval = document.getElementById("timers").value*1000;
      changers=  setInterval(showprieview, interval);
      document.getElementById('musicexecute').play()
     
 }
   let numbers = 0;
 function showprieview() {
     var transition = document.getElementById('transitions').value;
     
         $( "#videoplayer" ).toggle( transition );
     
  
  setTimeout(stoptrans,500);
 document.getElementById("videoplayer").src=document.querySelectorAll('img')[numbers].src;
    
     numbers= numbers+1;
  
if (numbers>document.images.length-2){
    clearInterval(changers)
    numbers=0;
}

 }
function stoptrans(){
    var transition = document.getElementById('transitions').value;
      $( "#videoplayer" ).toggle( transition );
}

function changebackcolor(){
    var background = document.getElementById('colorofback').value;
    document.getElementById('preview').style.backgroundColor= background;
}
function firetheme(){
    //https://media.tenor.com/PEDzvMlrdi0AAAAM/fire.gif
    document.getElementById('preview').style.backgroundImage = "url('https://media.tenor.com/PEDzvMlrdi0AAAAM/fire.gif')";
}
function changegradient(){
    var color1 = document.getElementById('gradcolorone').value;
    var color2 = document.getElementById('gradcolortwo').value;
    var background = "linear-gradient("+color1+","+ color2+")"
     document.getElementById('preview').style.backgroundImage=background;
}

 function blackandwhitetheme(){
     document.getElementById("videoplayer").style.filter="grayscale(100%)";
 }
 
   function requestFullScreen(element) {
    // Supports most browsers and their versions.
    var requestMethod = element.requestFullScreen || element.webkitRequestFullScreen || element.mozRequestFullScreen || element.msRequestFullscreen;

    if (requestMethod) { // Native full screen.
        requestMethod.call(element);
    } else if (typeof window.ActiveXObject !== "undefined") { // Older IE.
        var wscript = new ActiveXObject("WScript.Shell");
        if (wscript !== null) {
            wscript.SendKeys("{F11}");
        }
    }
}

function makeFullScreen() {
    
    var elem = document.getElementById('preview');
    document.getElementById('videoplayer').style.width = "100%";
     document.getElementById('videoplayer').style.height = "100%";
     var interval = document.getElementById("timers").value*1000*(document.images.length -2 );
     setTimeout(escapefullscreen,interval)
    requestFullScreen(elem);
}
function escapefullscreen(){
      document.getElementById('videoplayer').style.width = "450px";
   
}
function upanddown(){
   $(document).ready(function(){
  $("btntoload").click(function(){
    $("#videoplayer").slideUp(1).slideDown(2000);
  });
});
}
function birthdaytheme(){
    var birthdayimg= document.createElement('img');
    birthdayimg.src="https://www.lovethispic.com/uploaded_images/372358-Sparkling-Happy-Birthday-Balloon-Gif.gif";
      birthdayimg.style.width="100px";
    birthdayimg.style.height="100px";
    birthdayimg.style.right="10%";
    birthdayimg.style.top="10%"
    birthdayimg.style.position="absolute";
    document.getElementById('preview').style.backgroundImage="url('https://www.lovethispic.com/uploaded_images/372358-Sparkling-Happy-Birthday-Balloon-Gif.gif')"
    document.getElementById('THEMEMAKER').appendChild(birthdayimg);
}
function unicorntheme(){
    var birthdayimg= document.createElement('img');
    birthdayimg.src="https://i.postimg.cc/D09xWnf4/unicorntheme.gif";
      birthdayimg.style.width="120px";
    birthdayimg.style.height="100px";
    birthdayimg.style.right="10%";
    birthdayimg.style.top="10%"
    birthdayimg.style.position="absolute";
    document.getElementById('preview').style.backgroundImage= "url('https://i.postimg.cc/D09xWnf4/unicorntheme.gif')"
    document.getElementById('preview').style.backgroundSize = "contain";
    document.getElementById('THEMEMAKER').appendChild(birthdayimg);
}
function createtitle(){
    var text= document.getElementById('textitle').value;
    var back = document.getElementById('backcolor').value;
    var family = document.getElementById('fontfamily').value;
    var size= document.getElementById('fontsize').value;
    var color = document.getElementById('fontcolor').value;
    var canvas = document.createElement('canvas');
        canvas.style.width="450px";
        canvas.style.height="250px";
       canvas.style.backgroundColor= back;
    var context = canvas.getContext("2d");
 

    context.font= size + " "+family;
    context.fillStyle=color;
    context.fillText(text,10,50);
  
    document.body.appendChild(canvas)
      setTimeout(hidecanvas,5)
    html2canvas(canvas).then(canvas => {
    dataUrl = canvas.toDataURL(),
    imageFoo = document.createElement('img');
imageFoo.src = dataUrl;

imageFoo.setAttribute("height", "100");
document.getElementById('imagelanding').prependChild(imageFoo);
});
    
}
function hidecanvas(){
    const collection = document.getElementsByTagName("canvas");
for (let i = 0; i < collection.length; i++) {
  collection[i].style.display = "none";
}
}
/*
function counter() {
  var i = 0;
  // This block will be executed 100 times.
  setInterval(function() {
    if (i == 100) clearInterval(this);
    else console.log('Currently at ' + (i++));
  }, 1000);
}*/
setInterval(function(){ 
    var countsecond = document.images.length -1;
    var seconds = document.getElementById('timers').value;
    var value = countsecond*seconds;
    var format= Math.floor(value / 60) + ":" + (value % 60 ? value % 60 : '00')
document.getElementById('sec').innerHTML = format; 
}, 2000);

function switched(){
    var imgtore = document.getElementById('imgtoreplace').value-1;
    var imgtouse = document.getElementById('imgtouses').value*1-1;
    var replacesource = document.images[imgtore].src;
    var use = document.images[imgtouse].src;
    document.images[imgtore].src=use;
    document.images[imgtouse].src = replacesource;
    
}
  
   function changeHandler() {
     var musicer = document.getElementById('music');
  // Make sure we have files to use
  if (!musicer.files.length) return;

  // Create a blob that we can use as an src for our audio element
  const urlObj = URL.createObjectURL(musicer.files[0]);

  // Create an audio element
  const audio = document.getElementById('musicexecute');

  // Clean up the URL Object after we are done with it
  audio.addEventListener("load", () => {
    URL.revokeObjectURL(urlObj);
  });


  // Allow us to control the audio
 
  // Set the src and start loading the audio from the file
  audio.src = urlObj;
}


</script>
<small id="imgCount">3</small>
</body>
</html>
